{"title":"ApplePay","code":["/docs/stripe/apple-pay/apple-pay.ts.md"],"scrollActiveLine":[],"hypertext":"<p>With Apple Pay, you can make instant payments in a single flow. Please check settings: <a href=\"https://stripe.com/docs/apple-pay#merchantid\" rel=\"nofollow\">https://stripe.com/docs/apple-pay#merchantid</a></p>\n<h2 id=\"1.-createapplepay\"><a class=\"header-anchor-link\" href=\"#1.-createapplepay\" aria-hidden=\"true\" rel=\"nofollow\"></a> 1. createApplePay</h2>\n<p>You should connect to your backend endpoint, and get every key. This is &quot;not&quot; function at this Plugin. So you can use <code>HTTPClient</code> , <code>Axios</code> , <code>Ajax</code> , and so on.<br>\nBackend structure is here: <a href=\"https://stripe.com/docs/payments/accept-a-payment?platform=ios#add-server-endpoint\" rel=\"nofollow\">https://stripe.com/docs/payments/accept-a-payment?platform=ios#add-server-endpoint</a></p>\n<div class=\"code-block-container\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PaymentSheetEventsEnum<span class=\"token punctuation\">,</span> Stripe <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@capacitor-community/stripe'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createApplePay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n   * Connect to your backend endpoint, and get every key.\n   */</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> paymentIntent <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">post</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n    paymentIntent<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">.</span>api <span class=\"token operator\">+</span> <span class=\"token string\">'payment-sheet'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toPromise</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Promise</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">await</span> Stripe<span class=\"token punctuation\">.</span><span class=\"token function\">createApplePay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    paymentIntentClientSecret<span class=\"token operator\">:</span> paymentIntent<span class=\"token punctuation\">,</span>\n    paymentSummaryItems<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n      label<span class=\"token operator\">:</span> <span class=\"token string\">'Product Name'</span><span class=\"token punctuation\">,</span>\n      amount<span class=\"token operator\">:</span> <span class=\"token number\">1099.00</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    merchantDisplayName<span class=\"token operator\">:</span> <span class=\"token string\">'rdlabo'</span><span class=\"token punctuation\">,</span>\n    countryCode<span class=\"token operator\">:</span> <span class=\"token string\">'US'</span><span class=\"token punctuation\">,</span>\n    currency<span class=\"token operator\">:</span> <span class=\"token string\">'USD'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><h2 id=\"2.-presentapplepay\"><a class=\"header-anchor-link\" href=\"#2.-presentapplepay\" aria-hidden=\"true\" rel=\"nofollow\"></a> 2. presentApplePay</h2>\n<p>present in <code>createApplePay</code> is single flow. You don't need to confirm method.</p>\n<div class=\"code-block-container\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Stripe<span class=\"token punctuation\">.</span><span class=\"token function\">presentApplePay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}