{"title":"PaymentSheet","code":["/docs/stripe/payment-sheet/payment-sheet.ts.md"],"scrollActiveLine":[],"hypertext":"<p>With PaymentSheet, you can make payments in a single flow. As soon as the User presses the payment button, the payment is completed. (If you want user have some flow after that, please use <code>paymentFlow</code> method)</p>\n<p>This method can be used for both immediate payment with <code>PaymentIntent</code>, and recurring payments with <code>SetupIntent</code>.</p>\n<p>Don't know what these Intent is? Learn it first at the official Stripe website.</p>\n<hr>\n<ul>\n<li>PaymentIntent: <a href=\"https://stripe.com/docs/payments/payment-intents\" rel=\"nofollow\">stripe.com/docs/payments/payment-intents</a></li>\n<li>SetupIntent: <a href=\"https://stripe.com/docs/payments/save-and-reuse?platform=web\" rel=\"nofollow\">stripe.com/docs/payments/save-and-reuse</a></li>\n</ul>\n<hr>\n<p>This guide will show you an easy way to make instant payments.</p>\n<h2 id=\"1.-createpaymentsheet\"><a class=\"header-anchor-link\" href=\"#1.-createpaymentsheet\" aria-hidden=\"true\" rel=\"nofollow\"></a> 1. createPaymentSheet</h2>\n<p>This method is settings for PaymentSheet. You should connect to your backend endpoint, and get every key. This is &quot;not&quot; function at this Plugin. So you will use <code>HTTPClient</code> , <code>Axios</code> , <code>Ajax</code> , and so on. Here is example of Angular HttpClient. This method can get <code>paymentIntent</code>, <code>ephemeralKey</code>, and <code>ephemeralKey</code>.</p>\n<p>After that, you set these key to <code>createPaymentSheet</code> method.</p>\n<div class=\"code-block-container\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PaymentSheetEventsEnum<span class=\"token punctuation\">,</span> Stripe <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@capacitor-community/stripe'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createPaymentSheet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n   * Connect to your backend endpoint, and get every key.\n   */</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> paymentIntent<span class=\"token punctuation\">,</span> ephemeralKey<span class=\"token punctuation\">,</span> customer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">post</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n    paymentIntent<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    ephemeralKey<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    customer<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">.</span>api <span class=\"token operator\">+</span> <span class=\"token string\">'payment-sheet'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toPromise</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Promise</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  Stripe<span class=\"token punctuation\">.</span><span class=\"token function\">createPaymentSheet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    paymentIntentClientSecret<span class=\"token operator\">:</span> paymentIntent<span class=\"token punctuation\">,</span>\n    customerId<span class=\"token operator\">:</span> customer<span class=\"token punctuation\">,</span>\n    customerEphemeralKeySecret<span class=\"token operator\">:</span> ephemeralKey<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><h2 id=\"2.-presentpaymentsheet\"><a class=\"header-anchor-link\" href=\"#2.-presentpaymentsheet\" aria-hidden=\"true\" rel=\"nofollow\"></a> 2. presentPaymentSheet</h2>\n<p>When you do <code>presentPaymentSheet</code> method, plugin present PaymentSheet and get result.</p>\n<div class=\"code-block-container\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Stripe<span class=\"token punctuation\">.</span><span class=\"token function\">presentPaymentSheet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}